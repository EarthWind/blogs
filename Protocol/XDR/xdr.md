# XDR

## 1.基本的块大小
所有数据的大小必须是四字节的整数倍；
```
+--------+--------+...+--------+--------+...+--------+
| byte 0 | byte 1 |...|byte n-1|    0   |...|    0   |
+--------+--------+...+--------+--------+...+--------+
|<-----------n bytes---------->|<------r bytes------>|
|<-----------n+r (where (n+r) mod 4 = 0)>----------->|
```

## 2.数据类型
#### 2.1 有符号整形
整形被编码为四个字节，使用两个补码表示，最高有效位和最低有效位分别是0和3字节。
```
   (MSB)                   (LSB)
+-------+-------+-------+-------+
|byte 0 |byte 1 |byte 2 |byte 3 |
+-------+-------+-------+-------+
<------------32 bits------------>
```

#### 2.2 无符号整形
无符号整形被编码为四个字节，最高位和最低位分别是0和3字节。
```
(MSB)                   (LSB)
+-------+-------+-------+-------+
|byte 0 |byte 1 |byte 2 |byte 3 |
+-------+-------+-------+-------+
<------------32 bits------------>
```

#### 2.3 枚举(Enum)
枚举使用多个有符号整数来表示
```
enum { name-identifier = constant, ... } identifier;
比如：
enum { RED = 2, YELLOW = 3, BLUE = 5 } colors;
```

#### 2.4 布尔(boolean)
布尔使用枚举来表示
```
bool identifier;
等于：
enum { FALSE = 0, TRUE = 1 } identifier;
```

#### 2.5 超级整数和超级无符号整形
使用八个字节表示
```
  (MSB)                                                   (LSB)
+-------+-------+-------+-------+-------+-------+-------+-------+
|byte 0 |byte 1 |byte 2 |byte 3 |byte 4 |byte 5 |byte 6 |byte 7 |
+-------+-------+-------+-------+-------+-------+-------+-------+
<----------------------------64 bits---------------------------->
```

#### 2.6 浮点型
```
+-------+-------+-------+-------+
|byte 0 |byte 1 |byte 2 |byte 3 |
S|   E   |          F           |
+-------+-------+-------+-------+
1|<- 8 ->|<-------23 bits------>|
<------------32 bits------------>

(-1)**S * 2**(E-Bias) * 1.F
```

#### 2.7 双精度浮点型
```
+------+------+------+------+------+------+------+------+
|byte 0|byte 1|byte 2|byte 3|byte 4|byte 5|byte 6|byte 7|
S|    E   |                     F                       |
+------+------+------+------+------+------+------+------+
1|<--11-->|<-----------------52 bits------------------->|
<-----------------------64 bits------------------------->

(-1)**S * 2**(E-Bias) * 1.F
```

#### 2.8 四精度浮点数
```
+------+------+------+------+------+------+-...--+------+
|byte 0|byte 1|byte 2|byte 3|byte 4|byte 5| ...  |byte15|
S|     E      |                 F                       |
+------+------+------+------+------+------+-...--+------+
1|<----15---->|<-------------112 bits------------------>|
<-----------------------128 bits------------------------>
```

#### 2.9 固定长度的透明数据
```
    0        1     ...
+--------+--------+...+--------+--------+...+--------+
| byte 0 | byte 1 |...|byte n-1|    0   |...|    0   |
+--------+--------+...+--------+--------+...+--------+
|<-----------n bytes---------->|<------r bytes------>|
|<-----------n+r (where (n+r) mod 4 = 0)------------>|
```

#### 2.10 可变长度的数据
```
   0     1     2     3     4     5   ...
+-----+-----+-----+-----+-----+-----+...+-----+-----+...+-----+
|        length n       |byte0|byte1|...| n-1 |  0  |...|  0  |
+-----+-----+-----+-----+-----+-----+...+-----+-----+...+-----+
|<-------4 bytes------->|<------n bytes------>|<---r bytes--->|
                        |<----n+r (where (n+r) mod 4 = 0)---->|
```


#### 2.11 字符串
```
string object<m> or string object<>;

   0     1     2     3     4     5   ...
+-----+-----+-----+-----+-----+-----+...+-----+-----+...+-----+
|        length n       |byte0|byte1|...| n-1 |  0  |...|  0  |
+-----+-----+-----+-----+-----+-----+...+-----+-----+...+-----+
|<-------4 bytes------->|<------n bytes------>|<---r bytes--->|
                        |<----n+r (where (n+r) mod 4 = 0)---->|
```

#### 2.12 固定长度数组
```
type-name identifier[n];

+---+---+---+---+---+---+---+---+...+---+---+---+---+
|   element 0   |   element 1   |...|  element n-1  |
+---+---+---+---+---+---+---+---+...+---+---+---+---+
|<--------------------n elements------------------->|
```

#### 2.13 不定长度数组
```
  0  1  2  3
+--+--+--+--+--+--+--+--+--+--+--+--+...+--+--+--+--+
|    n      | element 0 | element 1 |...|element n-1|
+--+--+--+--+--+--+--+--+--+--+--+--+...+--+--+--+--+
|<-4 bytes->|<--------------n elements------------->|
```

#### 2.14 结构体
```
struct {
    component-declaration-A;
    component-declaration-B;
    ...
} identifier;

+-------------+-------------+...
| component A | component B |...
+-------------+-------------+...
```

#### 2.15 Union

#### 2.16 Void
```
  ++
  ||
  ++
--><-- 0 bytes
```






